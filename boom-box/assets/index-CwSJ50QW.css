:root{--font-display: "Potta One", cursive;--font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;--color-primary: #3450db;--color-accent: #f39c12;--color-danger: #e74c3c;--color-text: #2d3436;--color-text-muted: #636e72;--radius-sm: 8px;--radius-md: 12px;--radius-lg: 20px;--radius-pill: 50px;--shadow-sm: 0 2px 8px rgba(0, 0, 0, .08);--shadow-md: 0 4px 16px rgba(0, 0, 0, .12);--shadow-lg: 0 8px 32px rgba(0, 0, 0, .16);--transition-fast: .15s ease;--transition-normal: .25s ease}*{box-sizing:border-box}body,button,input{font-family:var(--font-ui)}#controls{position:absolute;top:1rem;right:1rem;display:flex;gap:0;z-index:100;background:#fffffff2;border-radius:var(--radius-pill);box-shadow:var(--shadow-md);padding:.25rem}#global-footer{position:fixed;bottom:.75rem;left:1rem;right:1rem;display:flex;justify-content:space-between;align-items:center;font-size:.8rem;color:var(--color-text-muted);z-index:100;font-family:var(--font-ui)}#global-footer .footer-left{opacity:.7}#global-footer #global-booms{font-weight:600;color:var(--color-primary);font-family:var(--font-display)}#global-footer .footer-right{color:var(--color-text-muted);text-decoration:none;opacity:.7;transition:opacity var(--transition-fast),color var(--transition-fast)}#global-footer .footer-right:hover{opacity:1;color:var(--color-primary)}.control-btn{width:42px;height:42px;border:none;border-radius:50%;background:transparent;cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center;transition:background var(--transition-fast),transform var(--transition-fast);position:relative}.control-btn:hover{background:#3450db1a;transform:scale(1.05)}.control-btn:active{transform:scale(.95);background:#3450db26}.control-btn:after{content:attr(aria-label);position:absolute;bottom:-2rem;left:50%;transform:translate(-50%);background:var(--color-text);color:#fff;padding:.25rem .5rem;border-radius:var(--radius-sm);font-size:.7rem;font-family:var(--font-ui);white-space:nowrap;opacity:0;pointer-events:none;transition:opacity var(--transition-fast)}.control-btn:hover:after{opacity:1}.mute-btn .sound-on{display:block}.mute-btn .sound-off,.mute-btn.muted .sound-on{display:none}.mute-btn.muted .sound-off{display:block}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;align-items:center;justify-content:center;z-index:200;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:fadeIn .2s ease}.modal.hidden{display:none}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:#fff;border-radius:var(--radius-lg);padding:2rem;max-width:400px;width:90%;box-shadow:var(--shadow-lg);animation:slideUp .3s ease}@keyframes slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-content h2{margin:0 0 1.5rem;text-align:center;color:var(--color-primary);font-size:1.8rem;font-family:var(--font-display)}.setting-group{margin-bottom:1.5rem}.setting-group label{display:block;margin-bottom:.75rem;color:var(--color-text-muted);font-size:.9rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.difficulty-buttons{display:flex;gap:.5rem}.diff-btn{flex:1;padding:.75rem .5rem;border:2px solid #e9ecef;border-radius:var(--radius-md);background:#fff;cursor:pointer;font-family:var(--font-display);font-size:.8rem;transition:all var(--transition-fast);color:var(--color-text-muted)}.diff-btn:hover{border-color:var(--color-primary);background:#3450db0d}.diff-btn.active{border-color:var(--color-primary);background:var(--color-primary);color:#fff}.diff-btn[data-difficulty=easy].active{background:#27ae60;border-color:#27ae60}.diff-btn[data-difficulty=hard].active{background:var(--color-danger);border-color:var(--color-danger)}.diff-description{margin:.75rem 0 0;font-size:.8rem;color:#888;text-align:center;min-height:2.5em}.close-btn{width:100%;padding:1rem;border:none;border-radius:var(--radius-md);background:var(--color-primary);color:#fff;font-family:var(--font-display);font-size:1rem;cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast),background var(--transition-fast)}.close-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #3450db59;background:#4a64e8}.close-btn:active{transform:translateY(0)}.stats-content{max-width:450px}.stats-content h2{text-align:center;color:var(--color-primary);margin-bottom:1.5rem;font-family:var(--font-display)}.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1.5rem}.stat-item{background:#f8f9fa;border-radius:var(--radius-md);padding:1rem;text-align:center;border:1px solid #e9ecef}.stat-label{display:block;font-size:.7rem;color:var(--color-text-muted);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.05em;font-weight:500}.stat-value{display:block;font-size:1.6rem;color:var(--color-primary);font-family:var(--font-display)}.stat-hint{display:block;font-size:.65rem;color:#999;margin-top:.25rem}.stats-buttons{display:flex;gap:.75rem;margin-top:.5rem}.stats-buttons .close-btn{flex:2}.reset-btn{flex:1;padding:1rem;border:2px solid var(--color-danger);border-radius:var(--radius-md);background:transparent;color:var(--color-danger);font-family:var(--font-display);font-size:.85rem;cursor:pointer;transition:all var(--transition-fast)}.reset-btn:hover{background:var(--color-danger);color:#fff}#reset-confirm-dialog{border:none;border-radius:var(--radius-lg);padding:2rem;background:#fff;max-width:90%;width:340px;box-shadow:var(--shadow-lg);animation:slideUp .3s ease}#reset-confirm-dialog::backdrop{background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}#reset-confirm-dialog h3{margin:0 0 1rem;font-family:var(--font-display);font-size:1.5rem;color:var(--color-danger);text-align:center}#reset-confirm-dialog p{margin:0 0 1.5rem;font-family:var(--font-ui);font-size:.95rem;color:var(--color-text-light);line-height:1.5;text-align:center}#reset-confirm-dialog .dialog-buttons{display:flex;gap:.75rem}#reset-confirm-dialog .dialog-btn{flex:1;padding:1rem;border:none;border-radius:var(--radius-md);font-family:var(--font-display);font-size:1rem;cursor:pointer;transition:all var(--transition-fast)}#reset-confirm-dialog .cancel-btn{background:#f0f0f0;color:var(--color-text);border:2px solid #ddd}#reset-confirm-dialog .cancel-btn:hover{background:#e5e5e5;border-color:#ccc}#reset-confirm-dialog .confirm-btn{background:var(--color-danger);color:#fff}#reset-confirm-dialog .confirm-btn:hover{background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 12px #e74c3c66}body{position:fixed;top:0;left:0;width:100vw;height:100vh;height:calc(100 * var(--vh, 1vh));margin:0;padding-bottom:4rem;display:flex;flex-direction:column;justify-content:flex-end;background:linear-gradient(180deg,#c5d8ff,#e0ebff,#f0f5ff);background-attachment:fixed;overflow:hidden;-webkit-user-select:none;user-select:none;box-sizing:border-box}body:before{content:"";position:fixed;top:0;left:0;right:0;bottom:0;background:radial-gradient(ellipse at center,transparent 0%,rgba(0,0,0,.03) 100%);pointer-events:none;z-index:0}#board{display:flex;justify-content:flex-start;align-items:flex-end;transition:all .15s ease-out;width:0;max-width:100%;margin:0 auto;position:relative;color:var(--color-text-muted);filter:drop-shadow(0 8px 24px rgba(0,0,0,.15))}#board:after{content:"";display:block;width:130%;height:5%;border-top:2px solid rgba(0,0,0,.15);position:absolute;top:0;left:-15%;border-radius:50%;pointer-events:none}#board>div{position:absolute;display:flex;flex-direction:column;transition:all 1s linear}#board button.cell{--col: 0;--row: 0;background-color:#555;color:#fff;outline:none;min-width:var(--dimension, 30px);height:var(--dimension, 30px);border:none;border-radius:5px;margin:3px;cursor:pointer;transition:all .15s ease-out;animation:raise .3s .2s ease-in forwards;position:absolute;left:calc((var(--dimension) + (var(--dimension) * .1)) * var(--col, 0));bottom:calc((var(--dimension) + (var(--dimension) * .1)) * var(--row, 0));opacity:0}#board button.cell:before,#board button.cell:after{content:"";display:inline-block;position:absolute;z-index:1;width:80%;height:80%;background:#ffffff1a;border-radius:50%;left:10%;top:10%}#board button.cell:after{background:#ffffff0d;border-radius:10px;transform:rotate(45deg);left:25%;top:25%;width:50%;height:50%}#board button.cell.boom{animation:box-boom .2s ease forwards;z-index:10}#board button.cell.highlight{box-shadow:0 0 12px 4px currentColor;z-index:5}#score-container{display:flex;justify-content:center;align-items:stretch;gap:0;padding:0;margin:0 auto .5rem;background:#fffffff2;border-radius:var(--radius-pill);box-shadow:var(--shadow-md);overflow:hidden;max-width:fit-content}#score-container>h3{margin:0;padding:.6rem 1.2rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.1rem;border-right:1px solid rgba(0,0,0,.08)}#score-container>h3:last-child{border-right:none}#score{color:var(--color-text);font-family:var(--font-display);font-size:1.1rem}#high-score{color:var(--color-accent);font-family:var(--font-display);font-size:1.1rem}#difficulty{color:var(--color-danger);font-family:var(--font-display);font-size:.95rem;padding:.6rem 1rem}#msg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.5rem;font-family:var(--font-display);white-space:pre-line;text-align:center;line-height:1.75;color:var(--color-primary);width:100%;z-index:50}@keyframes box-boom{0%{transform:scale(1);opacity:1}35%{transform:scale(1.5) rotate(360deg);opacity:.9}to{transform:scale(2) rotate(180deg);opacity:0}}@keyframes raise{0%{transform:scale(0) translateY(50px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}.cell.powerup{position:relative;overflow:visible}#board button.cell.powerup:after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:calc(var(--dimension, 30px) * .5);z-index:10;pointer-events:none;width:auto;height:auto;background:transparent;border-radius:0}#board button.cell.powerup-bomb:after{content:"ðŸ’£"}.cell.powerup-rainbow{background:linear-gradient(135deg,#e74c3c,#f39c12,#27ae60,#3498db,#9b59b6)!important;animation:rainbow-shift 2s linear infinite;background-size:200% 200%}#board button.cell.powerup-rainbow:after{content:"ðŸŒˆ"}@keyframes rainbow-shift{0%{background-position:0% 0%}50%{background-position:100% 100%}to{background-position:0% 0%}}#board button.cell.powerup-lightning:after{content:"âš¡"}.cell.powerup-lightning{box-shadow:0 0 10px 2px #ffeb3b99}.cell.powerup-bomb{box-shadow:0 0 10px 2px #e74c3c99}.particle{position:absolute;border-radius:50%;pointer-events:none;z-index:100;opacity:1;transform:translate(-50%,-50%)}.particle.animate{animation:particle-fly .6s ease-out forwards}@keyframes particle-fly{0%{transform:translate(-50%,-50%) scale(1);opacity:1}to{transform:translate(calc(-50% + var(--vx)),calc(-50% + var(--vy))) scale(0);opacity:0}}#board.shake{animation:shake var(--shake-duration, .3s) ease-out}@keyframes shake{0%,to{transform:translate(0) translateY(0)}10%{transform:translate(-8px) translateY(-4px)}20%{transform:translate(8px) translateY(4px)}30%{transform:translate(-6px) translateY(-2px)}40%{transform:translate(6px) translateY(2px)}50%{transform:translate(-4px) translateY(-4px)}60%{transform:translate(4px) translateY(4px)}70%{transform:translate(-2px) translateY(-2px)}80%{transform:translate(2px) translateY(2px)}90%{transform:translate(-1px) translateY(-1px)}}.score-popup{position:absolute;font-family:var(--font-display);font-size:1.5rem;font-weight:700;pointer-events:none;z-index:150;text-shadow:2px 2px 4px rgba(0,0,0,.4),0 0 10px rgba(255,255,255,.5);transform:translate(-50%,-50%);opacity:0}.score-popup.animate{animation:score-float .8s ease-out forwards}@keyframes score-float{0%{opacity:1;transform:translate(-50%,-50%) scale(.5)}20%{opacity:1;transform:translate(-50%,-50%) scale(1.2)}40%{transform:translate(-50%,-80%) scale(1)}to{opacity:0;transform:translate(-50%,-150%) scale(.8)}}.combo-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);z-index:200;text-align:center;pointer-events:none;opacity:0}.combo-popup .combo-count{display:block;font-family:var(--font-display);font-size:4rem;color:#ff6b35;text-shadow:3px 3px 0 #fff,-3px -3px 0 #fff,3px -3px 0 #fff,-3px 3px 0 #fff,4px 4px 8px rgba(0,0,0,.3)}.combo-popup .combo-text{display:block;font-family:var(--font-display);font-size:2rem;color:var(--color-primary);text-shadow:2px 2px 0 #fff,-2px -2px 0 #fff,2px -2px 0 #fff,-2px 2px 0 #fff;margin-top:-10px}.combo-popup.animate{animation:combo-pop 1.2s ease-out forwards}@keyframes combo-pop{0%{opacity:0;transform:translate(-50%,-50%) scale(0) rotate(-10deg)}15%{opacity:1;transform:translate(-50%,-50%) scale(1.3) rotate(5deg)}30%{transform:translate(-50%,-50%) scale(1) rotate(-3deg)}45%{transform:translate(-50%,-50%) scale(1.1) rotate(2deg)}60%{transform:translate(-50%,-50%) scale(1) rotate(0)}80%{opacity:1;transform:translate(-50%,-50%) scale(1) rotate(0)}to{opacity:0;transform:translate(-50%,-50%) scale(.8) rotate(0)}}.gameover-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);z-index:200;text-align:center;pointer-events:none;opacity:0}.gameover-popup .gameover-title{display:block;font-family:var(--font-display);font-size:4rem;color:var(--color-danger);text-shadow:3px 3px 0 #fff,-3px -3px 0 #fff,3px -3px 0 #fff,-3px 3px 0 #fff,4px 4px 8px rgba(0,0,0,.3)}.gameover-popup .gameover-score{display:block;font-family:var(--font-display);font-size:2rem;color:var(--color-primary);text-shadow:2px 2px 0 #fff,-2px -2px 0 #fff,2px -2px 0 #fff,-2px 2px 0 #fff;margin-top:-10px}.gameover-popup.animate{animation:gameover-pop 4s ease-out forwards}@keyframes gameover-pop{0%{opacity:0;transform:translate(-50%,-50%) scale(0) rotate(-10deg)}10%{opacity:1;transform:translate(-50%,-50%) scale(1.3) rotate(5deg)}15%{transform:translate(-50%,-50%) scale(1) rotate(-3deg)}25%{transform:translate(-50%,-50%) scale(1.1) rotate(2deg)}35%{transform:translate(-50%,-50%) scale(1) rotate(0)}85%{opacity:1;transform:translate(-50%,-50%) scale(1) rotate(0)}to{opacity:0;transform:translate(-50%,-50%) scale(.8) rotate(0)}}.cloud{background:#fff;background:linear-gradient(180deg,#fff,#f8f9fa);border-radius:100px;box-shadow:0 4px 20px #0000000a;height:120px;position:absolute;top:1rem;left:5rem;width:350px;z-index:0}.cloud:after,.cloud:before{background:#fff;content:"";position:absolute;z-index:-1}.cloud:after{border-radius:100px;height:100px;left:50px;top:-50px;width:100px}.cloud:before{border-radius:63% 53% 56% 50%/69% 55% 60% 50%;width:180px;height:140px;right:50px;top:-90px}.cloud.x1{opacity:.5;transform:scale(.35)}.cloud.x2{left:unset;right:5rem;top:25%;opacity:.6;transform:scale(.5)}.cloud.x3{top:unset;left:10%;bottom:35%;opacity:.5;transform:scale(.6)}
